<script>
    /**
     * UI —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Ö–æ–ª—Å—Ç–∞ - —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Å—Ç–∏–ª–∏
     * –†–ê–ó–ú–ï–©–ï–ù–ò–ï: –í –±–ª–æ–∫–µ HTML –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞ (–ø–µ—Ä–≤—ã–º)
     */
    // === UI —Ñ—É–Ω–∫—Ü–∏–∏ ===
    function showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        notification.className = `aiva-notification ${type === 'error' ? 'aiva-notification-error' : type === 'warning' ? 'aiva-notification-warning' : ''}`;
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.remove();
        }, type === 'error' ? 5000 : 3000);
    }
    function formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    function showFilePreview(file, container) {
        clearFilePreview(container);

        const previewContainer = document.createElement('div');
        previewContainer.className = 'aiva-file-preview';

        const img = document.createElement('img');
        img.className = 'aiva-file-preview-image';

        const fileInfo = document.createElement('div');
        fileInfo.className = 'aiva-file-info';

        const fileName = document.createElement('div');
        fileName.className = 'aiva-file-name';
        fileName.textContent = file.name;

        const fileSize = document.createElement('div');
        fileSize.className = 'aiva-file-size';
        fileSize.textContent = formatFileSize(file.size);

        fileInfo.appendChild(fileName);
        fileInfo.appendChild(fileSize);

        const removeBtn = document.createElement('button');
        removeBtn.className = 'aiva-file-remove';
        removeBtn.innerHTML = '√ó';
        removeBtn.type = 'button';
        removeBtn.addEventListener('click', function () {
            const fileInput = container.querySelector('.aiva-file-input');
            if (fileInput) fileInput.value = '';
            clearFilePreview(container);
        });

        previewContainer.appendChild(img);
        previewContainer.appendChild(fileInfo);
        previewContainer.appendChild(removeBtn);

        const reader = new FileReader();
        reader.onload = function (e) {
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);

        container.appendChild(previewContainer);
    }
    function clearFilePreview(container) {
        const existingPreview = container.querySelector('.aiva-file-preview');
        if (existingPreview) {
            existingPreview.remove();
        }
    }
    function validateFile(file) {
        return new Promise((resolve) => {
            const errors = [];

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
            if (!file.type.startsWith('image/')) {
                errors.push('–ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (15 –ú–ë)
            const maxSize = 15 * 1024 * 1024;
            if (file.size > maxSize) {
                errors.push('–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 15 –ú–ë');
            }

            resolve({
                valid: errors.length === 0,
                errors
            });
        });
    }
    // === UI –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ ===
    document.addEventListener('DOMContentLoaded', function () {
        console.log('üñºÔ∏è UI —Å–∫—Ä–∏–ø—Ç —Ö–æ–ª—Å—Ç–∞ –∑–∞–ø—É—â–µ–Ω');

        const rec = document.getElementById('rec1174632996');
        if (!rec) {
            console.warn('‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä rec1174632996 –Ω–µ –Ω–∞–π–¥–µ–Ω');
            return;
        }
        console.log('‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–π–¥–µ–Ω:', rec);
        // === –ß–∞—Å—Ç—å A: –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫–∞ ¬´–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ¬ª ===
        function tryEnhanceImageOption() {
            const imageOption = rec.querySelector(
                '.js-product-edition-option[data-edition-option-id="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"]'
            );
            if (!imageOption) return false;

            const variantsContainer = imageOption.querySelector('.t-product__option-variants_regular');
            if (!variantsContainer) return false;

            console.log('üñºÔ∏è –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ–ø—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');

            // 1) –°–∫—Ä—ã—Ç—å —Å–∞–º select
            const select = variantsContainer.querySelector('select');
            if (select) select.style.display = 'none';

            // 2) –î–æ–±–∞–≤–∏—Ç—å <input type="file"> —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
            if (!variantsContainer.querySelector('.aiva-file-input')) {
                const fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.accept = 'image/*';
                fileInput.className = 'aiva-file-input';

                fileInput.addEventListener('change', async function (e) {
                    const file = e.target.files[0];
                    if (file) {
                        console.log('üìÅ –§–∞–π–ª –≤—ã–±—Ä–∞–Ω:', file.name);

                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                        const loadingIndicator = document.createElement('div');
                        loadingIndicator.className = 'aiva-loading';
                        loadingIndicator.textContent = '–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∞–π–ª...';
                        variantsContainer.appendChild(loadingIndicator);

                        try {
                            // –í–∞–ª–∏–¥–∏—Ä—É–µ–º —Ñ–∞–π–ª
                            const validation = await validateFile(file);

                            // –£–±–∏—Ä–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                            loadingIndicator.remove();

                            if (!validation.valid) {
                                showNotification('–û—à–∏–±–∫–∞: ' + validation.errors.join(', '), 'error');
                                e.target.value = '';
                                clearFilePreview(variantsContainer);
                                return;
                            }

                            console.log('‚úÖ –§–∞–π–ª –ø—Ä–æ—à–µ–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é:', validation);
                            showFilePreview(file, variantsContainer);

                        } catch (error) {
                            loadingIndicator.remove();
                            console.error('‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞:', error);
                            showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ñ–∞–π–ª–∞', 'error');
                            e.target.value = '';
                            clearFilePreview(variantsContainer);
                        }
                    } else {
                        clearFilePreview(variantsContainer);
                    }
                });

                variantsContainer.appendChild(fileInput);
            }

            // 3) –í—Å—Ç–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
            const titleEl = imageOption.querySelector('.js-product-edition-option-name');
            if (titleEl && !imageOption.querySelector('.aiva-upload-instruction')) {
                const instr = document.createElement('div');
                instr.className = 'aiva-upload-instruction';
                instr.textContent = '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ —Å–≤–æ–µ–≥–æ –ø–∏—Ç–æ–º—Ü–∞ (–º–∞–∫—Å. 15–ú–ë)';
                titleEl.insertAdjacentElement('afterend', instr);
            }

            return true;
        }
        if (!tryEnhanceImageOption()) {
            const moImg = new MutationObserver((mutations, obs) => {
                if (tryEnhanceImageOption()) {
                    console.log('‚úÖ –û–ø—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —á–µ—Ä–µ–∑ observer');
                    obs.disconnect();
                }
            });
            moImg.observe(rec, { childList: true, subtree: true });
            setTimeout(tryEnhanceImageOption, 3000);
        }
        // === –ß–∞—Å—Ç—å B: –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ ===
        const btnWrapper = rec.querySelector('.t744__btn-wrapper');

        // 1. –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ + –ª–∏–Ω–∏—è
        const titleWrapper = rec.querySelector('.t744__title-wrapper');
        if (titleWrapper && !titleWrapper.querySelector('.aiva-line')) {
            titleWrapper.insertAdjacentHTML('beforeend', `
      <div class="aiva-subtitle">–¢–≤–æ–π –ø–∏—Ç–æ–º–µ—Ü ‚Äî —Ç–≤–æ–π —Å—Ç–∏–ª—å</div>
      <div class="aiva-line"></div>
    `);
        }
        // 2. –ü–µ—Ä–µ–Ω–æ—Å —Ü–µ–Ω—ã –Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π + –ª–∏–Ω–∏—è –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ
        const priceWrapper = rec.querySelector('.t744__price-wrapper');
        if (btnWrapper && priceWrapper && !rec.querySelector('.aiva-price-message')) {
            const line = document.createElement('div');
            line.className = 'aiva-line';

            const msg = document.createElement('div');
            msg.className = 'aiva-price-message';
            msg.textContent = '–•–æ—Ç–∏—Ç–µ —á—Ç–æ-—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ? –°–¥–µ–ª–∞–µ–º –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω –∏–ª–∏ –ø–æ–º–æ–∂–µ–º —Å –≤—ã–±–æ—Ä–æ–º ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º!';

            btnWrapper.parentNode.insertBefore(line, btnWrapper);
            btnWrapper.parentNode.insertBefore(msg, btnWrapper);
            btnWrapper.parentNode.insertBefore(priceWrapper, btnWrapper);
        }
        // 3. –ê–∫–∫–æ—Ä–¥–µ–æ–Ω —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–Ω–æ–ø–∫–∏
        if (btnWrapper && !rec.querySelector('.aiva-accordion')) {
            btnWrapper.insertAdjacentHTML('afterend', `
      <div class="aiva-line"></div>
      <div class="aiva-accordion">
        <div class="aiva-accordion-item">
          <div class="aiva-accordion-title">
            –û–ø–∏—Å–∞–Ω–∏–µ <span class="aiva-symbol">+</span>
          </div>
          <div class="aiva-accordion-content">
            <p>–°–æ–∑–¥–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—Ä–∏–Ω—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤–∞—à–µ–≥–æ –ª—é–±–∏–º–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞ ‚Äì —ç—Ç–æ —Å—Ç–∏–ª—å–Ω—ã–π –¥–æ–º–∞—à–Ω–∏–π –∞–∫—Å–µ—Å—Å—É–∞—Ä, –∞ –ª—é–±–∏–º–∞—è –º–æ—Ä–¥–∞—Ö–∞ –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω—è—Ç—å —Å–µ—Ä–¥—Ü–µ —Ç–µ–ø–ª–æ—Ç–æ–π –∏ —Ä–∞–¥–æ—Å—Ç—å—é. –•–æ–ª—Å—Ç –≤ –≥–æ—Å—Ç–∏–Ω–æ–π, –≥–¥–µ –≤–∞—à —Ö–≤–æ—Å—Ç–∏–∫ ¬´–Ω–µ—Å—ë—Ç —Å–ª—É–∂–±—É¬ª ‚Äî –∏ –≥–æ—Å—Ç–∏ —Å—Ä–∞–∑—É –ø–æ–Ω–∏–º–∞—é—Ç, –∫—Ç–æ —Ç—É—Ç –≥–ª–∞–≤–Ω—ã–π)</p>
            <p>–ü—Ä–æ—Å—Ç–æ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –≤–∞—à–µ–≥–æ –ø–∏—Ç–æ–º—Ü–∞, –∏ –º—ã –ø—Ä–µ–≤—Ä–∞—Ç–∏–º –µ–µ –≤ –∞–≤—Ç–æ—Ä—Å–∫—É—é –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Ä–∞–¥–æ–≤–∞—Ç—å –≤–∞—Å –≥–æ–¥–∞–º–∏. –í—ã–±–∏—Ä–∞–π—Ç–µ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä –≤–∞—à–µ–≥–æ –ª—é–±–∏–º—Ü–∞: –¥–ª—è –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ - —Å–µ–ª—Ñ–∏ —É –ö–æ–ª–∏–∑–µ—è, –¥–ª—è –º–æ–¥–Ω–∏—Ü - –≥–æ—Ä–æ–¥—Å–∫–æ–π —Å—Ç–∏–ª—å, –¥–ª—è —Ö—É–ª–∏–≥–∞–Ω–æ–≤ ‚Äì —Å—Ç–∏–ª—å ¬´–æ—Å—Ç—Ä—ã–µ –∫–æ–∑—ã—Ä—å–∫–∏¬ª, —É –Ω–∞—Å –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç –¥–∞–∂–µ –¥–ª—è —Ç–µ—Ö –ø–∏—Ç–æ–º—Ü–µ–≤, –∫—Ç–æ –ª—é–±–∏—Ç –ø–æ—Ä–∞–∑–º—ã—à–ª—è—Ç—å –≤ —Ç–∏—à–∏–Ω–µ –∑–∞ —á–∞—à–µ—á–∫–æ–π –∫–æ—Ñ–µ))) –ü–æ–∫–∞–∂–∏—Ç–µ –º–∏—Ä—É –∏—Å—Ç–∏–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –≤–∞—à–µ–≥–æ –ø–∏—Ç–æ–º—Ü–∞!</p>
          </div>
        </div>
        <div class="aiva-accordion-item">
          <div class="aiva-accordion-title">
            –°–æ—Å—Ç–∞–≤ <span class="aiva-symbol">+</span>
          </div>
          <div class="aiva-accordion-content">
            <p>100% —Ö–ª–æ–ø–æ–∫, –ø–ª–æ—Ç–Ω–æ—Å—Ç—å 380–≥/–º¬≤. –ü—Ä–∏–Ω—Ç –Ω–∞–Ω–µ—Å—ë–Ω —É—Å—Ç–æ–π—á–∏–≤—ã–º–∏ —á–µ—Ä–Ω–∏–ª–∞–º–∏ —Å –≤—ã—Å–æ–∫–∏–º —É—Ä–æ–≤–Ω–µ–º –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ù–∞—Ç—è–∂–∫–∞ ‚Äì –≥–∞–ª–µ—Ä–µ–π–Ω–∞—è (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –Ω–∞ –±–æ–∫–æ–≤—ã—Ö –≥—Ä–∞–Ω—è—Ö –ø–æ–¥—Ä–∞–º–Ω–∏–∫–∞, –∫—Ä–∞—è –Ω–µ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–ª—ã–º–∏ –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –±–∞–≥–µ—Ç–∞, –ø–æ—ç—Ç–æ–º—É –∫–∞—Ä—Ç–∏–Ω—É –º–æ–∂–Ω–æ –≤–µ—à–∞—Ç—å –±–µ–∑ —Ä–∞–º—ã).</p>
          </div>
        </div>
        <div class="aiva-accordion-item">
          <div class="aiva-accordion-title">
            –£—Ö–æ–¥ –∑–∞ —Ö–æ–ª—Å—Ç–æ–º <span class="aiva-symbol">+</span>
          </div>
          <div class="aiva-accordion-content">
            <p>–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞–∑–º–µ—â–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω—É —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–∞ –Ω–µ–µ –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∏ –ø—Ä—è–º—ã–µ —Å–æ–ª–Ω–µ—á–Ω—ã–µ –ª—É—á–∏, –≤—ã–¥–µ—Ä–∂–∏–≤–∞—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –±–æ–ª–µ–µ 50 —Å–º –æ—Ç –ø—Ä—è–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç–µ–ø–ª–∞, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–∞–¥–∏–∞—Ç–æ—Ä—ã, –≤ –ø–æ–º–µ—â–µ–Ω–∏—è—Ö —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –Ω–µ–≤—ã—Å–æ–∫–æ–π –≤–ª–∞–∂–Ω–æ—Å—Ç—å—é. –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—Ä–æ–≤–∏—Å–∞–Ω–∏—é —Ö–æ–ª—Å—Ç–∞ –∏ –∏—Å–∫–∞–∂–µ–Ω–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.</p>
            <p>–î–ª—è —É–±–æ—Ä–∫–∏ –ø—ã–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º—è–≥–∫—É—é —Å—É—Ö—É—é —Ç–∫–∞–Ω—å –±–µ–∑ –≤–æ—Ä—Å–∞, –Ω–µ –Ω–∞–¥–∞–≤–ª–∏–≤–∞—è –Ω–∞ –ø–æ–ª–æ—Ç–Ω–æ. –ù–µ –¥–µ–ª–∞—Ç—å –≤–ª–∞–∂–Ω—É—é —É–±–æ—Ä–∫—É, –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∏—Å—Ç—è—â–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞. –í–µ—à–∞—Ç—å –≤ —Å—É—Ö–æ–º –º–µ—Å—Ç–µ, –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏. –ù–µ –æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ö–æ–ª—Å—Ç –Ω–∞ –ø–æ–¥—Ä–∞–º–Ω–∏–∫–µ, –Ω–µ —Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –Ω–µ–≥–æ —Ç—è–∂–µ–ª—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ö–æ–ª—Å—Ç–∞ –∏ –≤–º—è—Ç–∏–Ω.</p>
          </div>
        </div>
      </div>
    `);

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞
            rec.querySelectorAll('.aiva-accordion-title').forEach(title => {
                title.addEventListener('click', () => {
                    const item = title.closest('.aiva-accordion-item');
                    const content = item.querySelector('.aiva-accordion-content');
                    const sym = title.querySelector('.aiva-symbol');

                    const open = content.classList.toggle('open');
                    sym.textContent = open ? '‚àí' : '+';

                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –¥—Ä—É–≥–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω—ã
                    rec.querySelectorAll('.aiva-accordion-item').forEach(otherItem => {
                        if (otherItem !== item) {
                            const otherContent = otherItem.querySelector('.aiva-accordion-content');
                            const otherSymbol = otherItem.querySelector('.aiva-symbol');
                            otherContent.classList.remove('open');
                            otherSymbol.textContent = '+';
                        }
                    });
                });
            });
        }
        // 4. –ü–µ—Ä–µ–Ω–æ—Å .js-product-option –≤–Ω—É—Ç—Ä—å label –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è select
        function relocateSelects() {
            const groups = rec.querySelectorAll('.js-product-edition-option[data-option-type="regular"][data-view-type="radio"]');
            const extras = rec.querySelectorAll('.js-product-option');

            groups.forEach(group => {
                group.querySelectorAll('label').forEach(label => {
                    const radio = label.querySelector('input[type="radio"]');
                    const val = radio?.value.trim();

                    extras.forEach(opt => {
                        const nameEl = opt.querySelector('.js-product-option-name');
                        if (!nameEl) return;

                        if (nameEl.textContent.trim() === val && !label.contains(opt)) {
                            nameEl.style.display = 'none';
                            label.appendChild(opt);
                            const sel = opt.querySelector('select');
                            if (sel) sel.disabled = !radio.checked;
                        }
                    });
                });

                group.querySelectorAll('input[type="radio"]').forEach(radio => {
                    radio.addEventListener('change', () => {
                        group.querySelectorAll('input[type="radio"]').forEach(r => {
                            const lbl = r.closest('label');
                            const sel = lbl.querySelector('select');
                            if (sel) sel.disabled = !r.checked;
                        });
                    });
                });
            });
        }
        const moMain = new MutationObserver(relocateSelects);
        moMain.observe(rec, { childList: true, subtree: true });
        relocateSelects();
        console.log('‚úÖ UI —Å–∫—Ä–∏–ø—Ç —Ö–æ–ª—Å—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω');
    });
</script>